{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":40,"index":166}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":167},"end":{"line":4,"column":44,"index":211}}],"key":"1dnSYy85BrQ8GvZyUKLmyTkvrWI=","exportNames":["*"],"imports":1}},{"name":"../src/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":212},"end":{"line":5,"column":34,"index":246}}],"key":"hItasGPnvPxlPtlTbtNshqLBPMw=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/index.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return Index;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[2], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[4], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _srcStore = require(_dependencyMap[6], \"../src/store\");\n  var _srcApi = require(_dependencyMap[7], \"../src/api\");\n  var api = _interopNamespace(_srcApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  const COLORS = {\n    primary: '#7C3AED',\n    background: '#F8F9FA',\n    text: '#212529'\n  };\n  function Index() {\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      sessionToken,\n      isLoading,\n      setUser,\n      loadStoredAuth\n    } = (0, _srcStore.useAuthStore)();\n    const [checking, setChecking] = (0, _react.useState)(true);\n    const [status, setStatus] = (0, _react.useState)('Loading...');\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    (0, _react.useEffect)(() => {\n      const checkAuth = async () => {\n        // Wait for auth store to finish loading\n        if (isLoading) return;\n\n        // Small delay to ensure navigation is ready\n        await new Promise(resolve => setTimeout(resolve, 300));\n        if (!sessionToken) {\n          console.log('No session token, redirecting to login');\n          router.replace('/(auth)/login');\n          return;\n        }\n        try {\n          setStatus('Checking session...');\n          console.log('Checking auth with token...');\n          const response = await api.getMe();\n          setUser(response.data);\n\n          // Check if user has completed profile setup\n          const user = response.data;\n          const needsProfile = !user.name || !user.partner_type;\n          if (needsProfile) {\n            console.log('User needs to complete profile, redirecting to register');\n            router.replace('/register');\n          } else {\n            console.log('User is fully registered, redirecting to home');\n            router.replace('/(main)/home');\n          }\n        } catch (error) {\n          console.error('Auth check failed:', error);\n          router.replace('/(auth)/login');\n        } finally {\n          setChecking(false);\n        }\n      };\n      checkAuth();\n    }, [isLoading, sessionToken]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: COLORS.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.loadingText,\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: COLORS.background,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    loadingText: {\n      marginTop: 16,\n      fontSize: 16,\n      color: COLORS.text\n    }\n  });\n});","lineCount":139,"map":[[28,2,13,15,"Object"],[28,8,13,15],[28,9,13,15,"defineProperty"],[28,23,13,15],[28,24,13,15,"exports"],[28,31,13,15],[29,4,13,15,"enumerable"],[29,14,13,15],[30,4,13,15,"get"],[30,7,13,15],[30,18,13,15,"get"],[30,19,13,15],[31,6,13,15],[31,13,13,15,"Index"],[31,18,13,15],[32,4,13,15],[33,2,13,15],[34,2,1,0],[34,6,1,0,"_react"],[34,12,1,0],[34,15,1,0,"require"],[34,22,1,0],[34,23,1,0,"_dependencyMap"],[34,37,1,0],[35,2,1,51],[35,6,1,51,"_reactNativeWebDistExportsView"],[35,36,1,51],[35,39,1,51,"require"],[35,46,1,51],[35,47,1,51,"_dependencyMap"],[35,61,1,51],[36,2,1,51],[36,6,1,51,"View"],[36,10,1,51],[36,13,1,51,"_interopDefault"],[36,28,1,51],[36,29,1,51,"_reactNativeWebDistExportsView"],[36,59,1,51],[37,2,1,51],[37,6,1,51,"_reactNativeWebDistExportsActivityIndicator"],[37,49,1,51],[37,52,1,51,"require"],[37,59,1,51],[37,60,1,51,"_dependencyMap"],[37,74,1,51],[38,2,1,51],[38,6,1,51,"ActivityIndicator"],[38,23,1,51],[38,26,1,51,"_interopDefault"],[38,41,1,51],[38,42,1,51,"_reactNativeWebDistExportsActivityIndicator"],[38,85,1,51],[39,2,1,51],[39,6,1,51,"_reactNativeWebDistExportsStyleSheet"],[39,42,1,51],[39,45,1,51,"require"],[39,52,1,51],[39,53,1,51,"_dependencyMap"],[39,67,1,51],[40,2,1,51],[40,6,1,51,"StyleSheet"],[40,16,1,51],[40,19,1,51,"_interopDefault"],[40,34,1,51],[40,35,1,51,"_reactNativeWebDistExportsStyleSheet"],[40,71,1,51],[41,2,1,51],[41,6,1,51,"_reactNativeWebDistExportsText"],[41,36,1,51],[41,39,1,51,"require"],[41,46,1,51],[41,47,1,51,"_dependencyMap"],[41,61,1,51],[42,2,1,51],[42,6,1,51,"Text"],[42,10,1,51],[42,13,1,51,"_interopDefault"],[42,28,1,51],[42,29,1,51,"_reactNativeWebDistExportsText"],[42,59,1,51],[43,2,3,0],[43,6,3,0,"_expoRouter"],[43,17,3,0],[43,20,3,0,"require"],[43,27,3,0],[43,28,3,0,"_dependencyMap"],[43,42,3,0],[44,2,4,0],[44,6,4,0,"_srcStore"],[44,15,4,0],[44,18,4,0,"require"],[44,25,4,0],[44,26,4,0,"_dependencyMap"],[44,40,4,0],[45,2,5,0],[45,6,5,0,"_srcApi"],[45,13,5,0],[45,16,5,0,"require"],[45,23,5,0],[45,24,5,0,"_dependencyMap"],[45,38,5,0],[46,2,5,0],[46,6,5,0,"api"],[46,9,5,0],[46,12,5,0,"_interopNamespace"],[46,29,5,0],[46,30,5,0,"_srcApi"],[46,37,5,0],[47,2,5,34],[47,6,5,34,"_reactJsxDevRuntime"],[47,25,5,34],[47,28,5,34,"require"],[47,35,5,34],[47,36,5,34,"_dependencyMap"],[47,50,5,34],[48,2,7,0],[48,8,7,6,"COLORS"],[48,14,7,12],[48,17,7,15],[49,4,8,2,"primary"],[49,11,8,9],[49,13,8,11],[49,22,8,20],[50,4,9,2,"background"],[50,14,9,12],[50,16,9,14],[50,25,9,23],[51,4,10,2,"text"],[51,8,10,6],[51,10,10,8],[52,2,11,0],[52,3,11,1],[53,2,13,15],[53,11,13,24,"Index"],[53,16,13,29,"Index"],[53,17,13,29],[53,19,13,32],[54,4,14,2],[54,10,14,8,"router"],[54,16,14,14],[54,19,14,17],[54,23,14,17,"useRouter"],[54,34,14,26],[54,35,14,26,"useRouter"],[54,44,14,26],[54,46,14,27],[54,47,14,28],[55,4,15,2],[55,10,15,8],[56,6,15,10,"sessionToken"],[56,18,15,22],[57,6,15,24,"isLoading"],[57,15,15,33],[58,6,15,35,"setUser"],[58,13,15,42],[59,6,15,44,"loadStoredAuth"],[60,4,15,59],[60,5,15,60],[60,8,15,63],[60,12,15,63,"useAuthStore"],[60,21,15,75],[60,22,15,75,"useAuthStore"],[60,34,15,75],[60,36,15,76],[60,37,15,77],[61,4,16,2],[61,10,16,8],[61,11,16,9,"checking"],[61,19,16,17],[61,21,16,19,"setChecking"],[61,32,16,30],[61,33,16,31],[61,36,16,34],[61,40,16,34,"useState"],[61,46,16,42],[61,47,16,42,"useState"],[61,55,16,42],[61,57,16,43],[61,61,16,47],[61,62,16,48],[62,4,17,2],[62,10,17,8],[62,11,17,9,"status"],[62,17,17,15],[62,19,17,17,"setStatus"],[62,28,17,26],[62,29,17,27],[62,32,17,30],[62,36,17,30,"useState"],[62,42,17,38],[62,43,17,38,"useState"],[62,51,17,38],[62,53,17,39],[62,65,17,51],[62,66,17,52],[63,4,19,2],[63,8,19,2,"useEffect"],[63,14,19,11],[63,15,19,11,"useEffect"],[63,24,19,11],[63,26,19,12],[63,32,19,18],[64,6,20,4,"loadStoredAuth"],[64,20,20,18],[64,21,20,19],[64,22,20,20],[65,4,21,2],[65,5,21,3],[65,7,21,5],[65,9,21,7],[65,10,21,8],[66,4,23,2],[66,8,23,2,"useEffect"],[66,14,23,11],[66,15,23,11,"useEffect"],[66,24,23,11],[66,26,23,12],[66,32,23,18],[67,6,24,4],[67,12,24,10,"checkAuth"],[67,21,24,19],[67,24,24,22],[67,30,24,22,"checkAuth"],[67,31,24,22],[67,36,24,34],[68,8,25,6],[69,8,26,6],[69,12,26,10,"isLoading"],[69,21,26,19],[69,23,26,21],[71,8,28,6],[72,8,29,6],[72,14,29,12],[72,18,29,16,"Promise"],[72,25,29,23],[72,26,29,24,"resolve"],[72,33,29,31],[72,37,29,35,"setTimeout"],[72,47,29,45],[72,48,29,46,"resolve"],[72,55,29,53],[72,57,29,55],[72,60,29,58],[72,61,29,59],[72,62,29,60],[73,8,31,6],[73,12,31,10],[73,13,31,11,"sessionToken"],[73,25,31,23],[73,27,31,25],[74,10,32,8,"console"],[74,17,32,15],[74,18,32,16,"log"],[74,21,32,19],[74,22,32,20],[74,62,32,60],[74,63,32,61],[75,10,33,8,"router"],[75,16,33,14],[75,17,33,15,"replace"],[75,24,33,22],[75,25,33,23],[75,40,33,38],[75,41,33,39],[76,10,34,8],[77,8,35,6],[78,8,37,6],[78,12,37,10],[79,10,38,8,"setStatus"],[79,19,38,17],[79,20,38,18],[79,41,38,39],[79,42,38,40],[80,10,39,8,"console"],[80,17,39,15],[80,18,39,16,"log"],[80,21,39,19],[80,22,39,20],[80,51,39,49],[80,52,39,50],[81,10,40,8],[81,16,40,14,"response"],[81,24,40,22],[81,27,40,25],[81,33,40,31,"api"],[81,36,40,34],[81,37,40,35,"getMe"],[81,42,40,40],[81,43,40,41],[81,44,40,42],[82,10,41,8,"setUser"],[82,17,41,15],[82,18,41,16,"response"],[82,26,41,24],[82,27,41,25,"data"],[82,31,41,29],[82,32,41,30],[84,10,43,8],[85,10,44,8],[85,16,44,14,"user"],[85,20,44,18],[85,23,44,21,"response"],[85,31,44,29],[85,32,44,30,"data"],[85,36,44,34],[86,10,45,8],[86,16,45,14,"needsProfile"],[86,28,45,26],[86,31,45,29],[86,32,45,30,"user"],[86,36,45,34],[86,37,45,35,"name"],[86,41,45,39],[86,45,45,43],[86,46,45,44,"user"],[86,50,45,48],[86,51,45,49,"partner_type"],[86,63,45,61],[87,10,47,8],[87,14,47,12,"needsProfile"],[87,26,47,24],[87,28,47,26],[88,12,48,10,"console"],[88,19,48,17],[88,20,48,18,"log"],[88,23,48,21],[88,24,48,22],[88,81,48,79],[88,82,48,80],[89,12,49,10,"router"],[89,18,49,16],[89,19,49,17,"replace"],[89,26,49,24],[89,27,49,25],[89,38,49,36],[89,39,49,37],[90,10,50,8],[90,11,50,9],[90,17,50,15],[91,12,51,10,"console"],[91,19,51,17],[91,20,51,18,"log"],[91,23,51,21],[91,24,51,22],[91,71,51,69],[91,72,51,70],[92,12,52,10,"router"],[92,18,52,16],[92,19,52,17,"replace"],[92,26,52,24],[92,27,52,25],[92,41,52,39],[92,42,52,40],[93,10,53,8],[94,8,54,6],[94,9,54,7],[94,10,54,8],[94,17,54,15,"error"],[94,22,54,20],[94,24,54,22],[95,10,55,8,"console"],[95,17,55,15],[95,18,55,16,"error"],[95,23,55,21],[95,24,55,22],[95,44,55,42],[95,46,55,44,"error"],[95,51,55,49],[95,52,55,50],[96,10,56,8,"router"],[96,16,56,14],[96,17,56,15,"replace"],[96,24,56,22],[96,25,56,23],[96,40,56,38],[96,41,56,39],[97,8,57,6],[97,9,57,7],[97,18,57,16],[98,10,58,8,"setChecking"],[98,21,58,19],[98,22,58,20],[98,27,58,25],[98,28,58,26],[99,8,59,6],[100,6,60,4],[100,7,60,5],[101,6,62,4,"checkAuth"],[101,15,62,13],[101,16,62,14],[101,17,62,15],[102,4,63,2],[102,5,63,3],[102,7,63,5],[102,8,63,6,"isLoading"],[102,17,63,15],[102,19,63,17,"sessionToken"],[102,31,63,29],[102,32,63,30],[102,33,63,31],[103,4,65,2],[103,24,66,4],[103,28,66,4,"_reactJsxDevRuntime"],[103,47,66,4],[103,48,66,4,"jsxDEV"],[103,54,66,4],[103,56,66,5,"View"],[103,60,66,9],[103,61,66,9,"default"],[103,68,66,9],[104,6,66,10,"style"],[104,11,66,15],[104,13,66,17,"styles"],[104,19,66,23],[104,20,66,24,"container"],[104,29,66,34],[105,6,66,34,"children"],[105,14,66,34],[105,30,67,6],[105,34,67,6,"_reactJsxDevRuntime"],[105,53,67,6],[105,54,67,6,"jsxDEV"],[105,60,67,6],[105,62,67,7,"ActivityIndicator"],[105,79,67,24],[105,80,67,24,"default"],[105,87,67,24],[106,8,67,25,"size"],[106,12,67,29],[106,14,67,30],[106,21,67,37],[107,8,67,38,"color"],[107,13,67,43],[107,15,67,45,"COLORS"],[107,21,67,51],[107,22,67,52,"primary"],[108,6,67,60],[109,8,67,60,"fileName"],[109,16,67,60],[109,18,67,60,"_jsxFileName"],[109,30,67,60],[110,8,67,60,"lineNumber"],[110,18,67,60],[111,8,67,60,"columnNumber"],[111,20,67,60],[112,6,67,60],[112,13,67,62],[112,14,67,63],[112,29,68,6],[112,33,68,6,"_reactJsxDevRuntime"],[112,52,68,6],[112,53,68,6,"jsxDEV"],[112,59,68,6],[112,61,68,7,"Text"],[112,65,68,11],[112,66,68,11,"default"],[112,73,68,11],[113,8,68,12,"style"],[113,13,68,17],[113,15,68,19,"styles"],[113,21,68,25],[113,22,68,26,"loadingText"],[113,33,68,38],[114,8,68,38,"children"],[114,16,68,38],[114,18,68,40,"status"],[115,6,68,46],[116,8,68,46,"fileName"],[116,16,68,46],[116,18,68,46,"_jsxFileName"],[116,30,68,46],[117,8,68,46,"lineNumber"],[117,18,68,46],[118,8,68,46,"columnNumber"],[118,20,68,46],[119,6,68,46],[119,13,68,53],[119,14,68,54],[120,4,68,54],[121,6,68,54,"fileName"],[121,14,68,54],[121,16,68,54,"_jsxFileName"],[121,28,68,54],[122,6,68,54,"lineNumber"],[122,16,68,54],[123,6,68,54,"columnNumber"],[123,18,68,54],[124,4,68,54],[124,11,69,10],[124,12,69,11],[125,2,71,0],[126,2,73,0],[126,8,73,6,"styles"],[126,14,73,12],[126,17,73,15,"StyleSheet"],[126,27,73,25],[126,28,73,25,"default"],[126,35,73,25],[126,36,73,26,"create"],[126,42,73,32],[126,43,73,33],[127,4,74,2,"container"],[127,13,74,11],[127,15,74,13],[128,6,75,4,"flex"],[128,10,75,8],[128,12,75,10],[128,13,75,11],[129,6,76,4,"backgroundColor"],[129,21,76,19],[129,23,76,21,"COLORS"],[129,29,76,27],[129,30,76,28,"background"],[129,40,76,38],[130,6,77,4,"justifyContent"],[130,20,77,18],[130,22,77,20],[130,30,77,28],[131,6,78,4,"alignItems"],[131,16,78,14],[131,18,78,16],[132,4,79,2],[132,5,79,3],[133,4,80,2,"loadingText"],[133,15,80,13],[133,17,80,15],[134,6,81,4,"marginTop"],[134,15,81,13],[134,17,81,15],[134,19,81,17],[135,6,82,4,"fontSize"],[135,14,82,12],[135,16,82,14],[135,18,82,16],[136,6,83,4,"color"],[136,11,83,9],[136,13,83,11,"COLORS"],[136,19,83,17],[136,20,83,18,"text"],[137,4,84,2],[138,2,85,0],[138,3,85,1],[138,4,85,2],[139,0,85,3],[139,3]],"functionMap":{"names":["<global>","Index","useEffect$argument_0","checkAuth","Promise$argument_0"],"mappings":"AAA;eCY;YCM;GDE;YCE;sBCC;wBCK,mCD;KD+B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}