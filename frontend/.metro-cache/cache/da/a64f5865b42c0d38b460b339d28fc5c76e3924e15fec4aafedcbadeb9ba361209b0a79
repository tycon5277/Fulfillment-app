{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":52},"end":{"line":2,"column":73,"index":125}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":40,"index":166}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":167},"end":{"line":4,"column":44,"index":211}}],"key":"1dnSYy85BrQ8GvZyUKLmyTkvrWI=","exportNames":["*"],"imports":1}},{"name":"../src/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":212},"end":{"line":5,"column":34,"index":246}}],"key":"hItasGPnvPxlPtlTbtNshqLBPMw=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/index.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return Index;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _expoRouter = require(_dependencyMap[4], \"expo-router\");\n  var _srcStore = require(_dependencyMap[5], \"../src/store\");\n  var _srcApi = require(_dependencyMap[6], \"../src/api\");\n  var api = _interopNamespace(_srcApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  var COLORS = {\n    primary: '#7C3AED',\n    background: '#F8F9FA',\n    text: '#212529'\n  };\n  function Index() {\n    _s();\n    var router = (0, _expoRouter.useRouter)();\n    var _useAuthStore = (0, _srcStore.useAuthStore)(),\n      sessionToken = _useAuthStore.sessionToken,\n      isLoading = _useAuthStore.isLoading,\n      setUser = _useAuthStore.setUser,\n      loadStoredAuth = _useAuthStore.loadStoredAuth;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      checking = _useState2[0],\n      setChecking = _useState2[1];\n    (0, _react.useEffect)(() => {\n      // First, load stored auth\n      loadStoredAuth();\n    }, []);\n    (0, _react.useEffect)(() => {\n      var checkAuth = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          // Wait for auth store to finish loading\n          if (isLoading) return;\n\n          // Small delay to ensure navigation is ready\n          yield new Promise(resolve => setTimeout(resolve, 500));\n          if (!sessionToken) {\n            console.log('No session token, redirecting to login');\n            router.replace('/(auth)/login');\n            return;\n          }\n          try {\n            console.log('Checking auth with token...');\n            var response = yield api.getMe();\n            setUser(response.data);\n            if (!response.data.is_agent) {\n              console.log('User is not an agent, redirecting to register');\n              router.replace('/register');\n            } else {\n              console.log('User is an agent, redirecting to home');\n              router.replace('/(main)/home');\n            }\n          } catch (error) {\n            console.error('Auth check failed:', error);\n            router.replace('/(auth)/login');\n          } finally {\n            setChecking(false);\n          }\n        });\n        return function checkAuth() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      checkAuth();\n    }, [isLoading]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.ActivityIndicator, {\n        size: \"large\",\n        color: COLORS.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.Text, {\n        style: styles.loadingText,\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }, this);\n  }\n  _s(Index, \"K8Cp3KDjP+Apai1sWIagQQ8Lkss=\", false, function () {\n    return [_expoRouter.useRouter, _srcStore.useAuthStore];\n  });\n  _c = Index;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: COLORS.background,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    loadingText: {\n      marginTop: 16,\n      fontSize: 16,\n      color: COLORS.text\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"Index\");\n});","lineCount":146,"map":[[29,2,13,15,"Object"],[29,8,13,15],[29,9,13,15,"defineProperty"],[29,23,13,15],[29,24,13,15,"exports"],[29,31,13,15],[30,4,13,15,"enumerable"],[30,14,13,15],[31,4,13,15,"get"],[31,7,13,15],[31,18,13,15,"get"],[31,19,13,15],[32,6,13,15],[32,13,13,15,"Index"],[32,18,13,15],[33,4,13,15],[34,2,13,15],[35,2,66,1],[35,6,66,1,"_babelRuntimeHelpersAsyncToGenerator"],[35,42,66,1],[35,45,66,1,"require"],[35,52,66,1],[35,53,66,1,"_dependencyMap"],[35,67,66,1],[36,2,66,1],[36,6,66,1,"_asyncToGenerator"],[36,23,66,1],[36,26,66,1,"_interopDefault"],[36,41,66,1],[36,42,66,1,"_babelRuntimeHelpersAsyncToGenerator"],[36,78,66,1],[37,2,66,1],[37,6,66,1,"_babelRuntimeHelpersSlicedToArray"],[37,39,66,1],[37,42,66,1,"require"],[37,49,66,1],[37,50,66,1,"_dependencyMap"],[37,64,66,1],[38,2,66,1],[38,6,66,1,"_slicedToArray"],[38,20,66,1],[38,23,66,1,"_interopDefault"],[38,38,66,1],[38,39,66,1,"_babelRuntimeHelpersSlicedToArray"],[38,72,66,1],[39,2,1,0],[39,6,1,0,"_react"],[39,12,1,0],[39,15,1,0,"require"],[39,22,1,0],[39,23,1,0,"_dependencyMap"],[39,37,1,0],[40,2,2,0],[40,6,2,0,"_reactNative"],[40,18,2,0],[40,21,2,0,"require"],[40,28,2,0],[40,29,2,0,"_dependencyMap"],[40,43,2,0],[41,2,3,0],[41,6,3,0,"_expoRouter"],[41,17,3,0],[41,20,3,0,"require"],[41,27,3,0],[41,28,3,0,"_dependencyMap"],[41,42,3,0],[42,2,4,0],[42,6,4,0,"_srcStore"],[42,15,4,0],[42,18,4,0,"require"],[42,25,4,0],[42,26,4,0,"_dependencyMap"],[42,40,4,0],[43,2,5,0],[43,6,5,0,"_srcApi"],[43,13,5,0],[43,16,5,0,"require"],[43,23,5,0],[43,24,5,0,"_dependencyMap"],[43,38,5,0],[44,2,5,0],[44,6,5,0,"api"],[44,9,5,0],[44,12,5,0,"_interopNamespace"],[44,29,5,0],[44,30,5,0,"_srcApi"],[44,37,5,0],[45,2,5,34],[45,6,5,34,"_reactJsxDevRuntime"],[45,25,5,34],[45,28,5,34,"require"],[45,35,5,34],[45,36,5,34,"_dependencyMap"],[45,50,5,34],[46,2,7,0],[46,6,7,6,"COLORS"],[46,12,7,12],[46,15,7,15],[47,4,8,2,"primary"],[47,11,8,9],[47,13,8,11],[47,22,8,20],[48,4,9,2,"background"],[48,14,9,12],[48,16,9,14],[48,25,9,23],[49,4,10,2,"text"],[49,8,10,6],[49,10,10,8],[50,2,11,0],[50,3,11,1],[51,2,13,15],[51,11,13,24,"Index"],[51,16,13,29,"Index"],[51,17,13,29],[51,19,13,32],[52,4,13,32,"_s"],[52,6,13,32],[53,4,14,2],[53,8,14,8,"router"],[53,14,14,14],[53,17,14,17],[53,21,14,17,"useRouter"],[53,32,14,26],[53,33,14,26,"useRouter"],[53,42,14,26],[53,44,14,27],[53,45,14,28],[54,4,15,2],[54,8,15,2,"_useAuthStore"],[54,21,15,2],[54,24,15,63],[54,28,15,63,"useAuthStore"],[54,37,15,75],[54,38,15,75,"useAuthStore"],[54,50,15,75],[54,52,15,76],[54,53,15,77],[55,6,15,10,"sessionToken"],[55,18,15,22],[55,21,15,22,"_useAuthStore"],[55,34,15,22],[55,35,15,10,"sessionToken"],[55,47,15,22],[56,6,15,24,"isLoading"],[56,15,15,33],[56,18,15,33,"_useAuthStore"],[56,31,15,33],[56,32,15,24,"isLoading"],[56,41,15,33],[57,6,15,35,"setUser"],[57,13,15,42],[57,16,15,42,"_useAuthStore"],[57,29,15,42],[57,30,15,35,"setUser"],[57,37,15,42],[58,6,15,44,"loadStoredAuth"],[58,20,15,58],[58,23,15,58,"_useAuthStore"],[58,36,15,58],[58,37,15,44,"loadStoredAuth"],[58,51,15,58],[59,4,16,2],[59,8,16,2,"_useState"],[59,17,16,2],[59,20,16,34],[59,24,16,34,"useState"],[59,30,16,42],[59,31,16,42,"useState"],[59,39,16,42],[59,41,16,43],[59,45,16,47],[59,46,16,48],[60,6,16,48,"_useState2"],[60,16,16,48],[60,23,16,48,"_slicedToArray"],[60,37,16,48],[60,38,16,48,"default"],[60,45,16,48],[60,47,16,48,"_useState"],[60,56,16,48],[61,6,16,9,"checking"],[61,14,16,17],[61,17,16,17,"_useState2"],[61,27,16,17],[62,6,16,19,"setChecking"],[62,17,16,30],[62,20,16,30,"_useState2"],[62,30,16,30],[63,4,18,2],[63,8,18,2,"useEffect"],[63,14,18,11],[63,15,18,11,"useEffect"],[63,24,18,11],[63,26,18,12],[63,32,18,18],[64,6,19,4],[65,6,20,4,"loadStoredAuth"],[65,20,20,18],[65,21,20,19],[65,22,20,20],[66,4,21,2],[66,5,21,3],[66,7,21,5],[66,9,21,7],[66,10,21,8],[67,4,23,2],[67,8,23,2,"useEffect"],[67,14,23,11],[67,15,23,11,"useEffect"],[67,24,23,11],[67,26,23,12],[67,32,23,18],[68,6,24,4],[68,10,24,10,"checkAuth"],[68,19,24,19],[69,8,24,19],[69,12,24,19,"_ref"],[69,16,24,19],[69,23,24,19,"_asyncToGenerator"],[69,40,24,19],[69,41,24,19,"default"],[69,48,24,19],[69,50,24,22],[69,63,24,34],[70,10,25,6],[71,10,26,6],[71,14,26,10,"isLoading"],[71,23,26,19],[71,25,26,21],[73,10,28,6],[74,10,29,6],[74,16,29,12],[74,20,29,16,"Promise"],[74,27,29,23],[74,28,29,24,"resolve"],[74,35,29,31],[74,39,29,35,"setTimeout"],[74,49,29,45],[74,50,29,46,"resolve"],[74,57,29,53],[74,59,29,55],[74,62,29,58],[74,63,29,59],[74,64,29,60],[75,10,31,6],[75,14,31,10],[75,15,31,11,"sessionToken"],[75,27,31,23],[75,29,31,25],[76,12,32,8,"console"],[76,19,32,15],[76,20,32,16,"log"],[76,23,32,19],[76,24,32,20],[76,64,32,60],[76,65,32,61],[77,12,33,8,"router"],[77,18,33,14],[77,19,33,15,"replace"],[77,26,33,22],[77,27,33,23],[77,42,33,38],[77,43,33,39],[78,12,34,8],[79,10,35,6],[80,10,37,6],[80,14,37,10],[81,12,38,8,"console"],[81,19,38,15],[81,20,38,16,"log"],[81,23,38,19],[81,24,38,20],[81,53,38,49],[81,54,38,50],[82,12,39,8],[82,16,39,14,"response"],[82,24,39,22],[82,33,39,31,"api"],[82,36,39,34],[82,37,39,35,"getMe"],[82,42,39,40],[82,43,39,41],[82,44,39,42],[83,12,40,8,"setUser"],[83,19,40,15],[83,20,40,16,"response"],[83,28,40,24],[83,29,40,25,"data"],[83,33,40,29],[83,34,40,30],[84,12,42,8],[84,16,42,12],[84,17,42,13,"response"],[84,25,42,21],[84,26,42,22,"data"],[84,30,42,26],[84,31,42,27,"is_agent"],[84,39,42,35],[84,41,42,37],[85,14,43,10,"console"],[85,21,43,17],[85,22,43,18,"log"],[85,25,43,21],[85,26,43,22],[85,73,43,69],[85,74,43,70],[86,14,44,10,"router"],[86,20,44,16],[86,21,44,17,"replace"],[86,28,44,24],[86,29,44,25],[86,40,44,36],[86,41,44,37],[87,12,45,8],[87,13,45,9],[87,19,45,15],[88,14,46,10,"console"],[88,21,46,17],[88,22,46,18,"log"],[88,25,46,21],[88,26,46,22],[88,65,46,61],[88,66,46,62],[89,14,47,10,"router"],[89,20,47,16],[89,21,47,17,"replace"],[89,28,47,24],[89,29,47,25],[89,43,47,39],[89,44,47,40],[90,12,48,8],[91,10,49,6],[91,11,49,7],[91,12,49,8],[91,19,49,15,"error"],[91,24,49,20],[91,26,49,22],[92,12,50,8,"console"],[92,19,50,15],[92,20,50,16,"error"],[92,25,50,21],[92,26,50,22],[92,46,50,42],[92,48,50,44,"error"],[92,53,50,49],[92,54,50,50],[93,12,51,8,"router"],[93,18,51,14],[93,19,51,15,"replace"],[93,26,51,22],[93,27,51,23],[93,42,51,38],[93,43,51,39],[94,10,52,6],[94,11,52,7],[94,20,52,16],[95,12,53,8,"setChecking"],[95,23,53,19],[95,24,53,20],[95,29,53,25],[95,30,53,26],[96,10,54,6],[97,8,55,4],[97,9,55,5],[98,8,55,5],[98,24,24,10,"checkAuth"],[98,33,24,19,"checkAuth"],[98,34,24,19],[99,10,24,19],[99,17,24,19,"_ref"],[99,21,24,19],[99,22,24,19,"apply"],[99,27,24,19],[99,34,24,19,"arguments"],[99,43,24,19],[100,8,24,19],[101,6,24,19],[101,9,55,5],[102,6,57,4,"checkAuth"],[102,15,57,13],[102,16,57,14],[102,17,57,15],[103,4,58,2],[103,5,58,3],[103,7,58,5],[103,8,58,6,"isLoading"],[103,17,58,15],[103,18,58,16],[103,19,58,17],[104,4,60,2],[104,24,61,4],[104,28,61,4,"_reactJsxDevRuntime"],[104,47,61,4],[104,48,61,4,"jsxDEV"],[104,54,61,4],[104,56,61,5,"_reactNative"],[104,68,61,9],[104,69,61,9,"View"],[104,73,61,9],[105,6,61,10,"style"],[105,11,61,15],[105,13,61,17,"styles"],[105,19,61,23],[105,20,61,24,"container"],[105,29,61,34],[106,6,61,34,"children"],[106,14,61,34],[106,30,62,6],[106,34,62,6,"_reactJsxDevRuntime"],[106,53,62,6],[106,54,62,6,"jsxDEV"],[106,60,62,6],[106,62,62,7,"_reactNative"],[106,74,62,24],[106,75,62,24,"ActivityIndicator"],[106,92,62,24],[107,8,62,25,"size"],[107,12,62,29],[107,14,62,30],[107,21,62,37],[108,8,62,38,"color"],[108,13,62,43],[108,15,62,45,"COLORS"],[108,21,62,51],[108,22,62,52,"primary"],[109,6,62,60],[110,8,62,60,"fileName"],[110,16,62,60],[110,18,62,60,"_jsxFileName"],[110,30,62,60],[111,8,62,60,"lineNumber"],[111,18,62,60],[112,8,62,60,"columnNumber"],[112,20,62,60],[113,6,62,60],[113,13,62,62],[113,14,62,63],[113,29,63,6],[113,33,63,6,"_reactJsxDevRuntime"],[113,52,63,6],[113,53,63,6,"jsxDEV"],[113,59,63,6],[113,61,63,7,"_reactNative"],[113,73,63,11],[113,74,63,11,"Text"],[113,78,63,11],[114,8,63,12,"style"],[114,13,63,17],[114,15,63,19,"styles"],[114,21,63,25],[114,22,63,26,"loadingText"],[114,33,63,38],[115,8,63,38,"children"],[115,16,63,38],[115,18,63,39],[116,6,63,49],[117,8,63,49,"fileName"],[117,16,63,49],[117,18,63,49,"_jsxFileName"],[117,30,63,49],[118,8,63,49,"lineNumber"],[118,18,63,49],[119,8,63,49,"columnNumber"],[119,20,63,49],[120,6,63,49],[120,13,63,55],[120,14,63,56],[121,4,63,56],[122,6,63,56,"fileName"],[122,14,63,56],[122,16,63,56,"_jsxFileName"],[122,28,63,56],[123,6,63,56,"lineNumber"],[123,16,63,56],[124,6,63,56,"columnNumber"],[124,18,63,56],[125,4,63,56],[125,11,64,10],[125,12,64,11],[126,2,66,0],[127,2,66,1,"_s"],[127,4,66,1],[127,5,13,24,"Index"],[127,10,13,29],[128,4,13,29],[128,12,14,17,"useRouter"],[128,23,14,26],[128,24,14,26,"useRouter"],[128,33,14,26],[128,35,15,63,"useAuthStore"],[128,44,15,75],[128,45,15,75,"useAuthStore"],[128,57,15,75],[129,2,15,75],[130,2,15,75,"_c"],[130,4,15,75],[130,7,13,24,"Index"],[130,12,13,29],[131,2,68,0],[131,6,68,6,"styles"],[131,12,68,12],[131,15,68,15,"StyleSheet"],[131,27,68,25],[131,28,68,25,"StyleSheet"],[131,38,68,25],[131,39,68,26,"create"],[131,45,68,32],[131,46,68,33],[132,4,69,2,"container"],[132,13,69,11],[132,15,69,13],[133,6,70,4,"flex"],[133,10,70,8],[133,12,70,10],[133,13,70,11],[134,6,71,4,"backgroundColor"],[134,21,71,19],[134,23,71,21,"COLORS"],[134,29,71,27],[134,30,71,28,"background"],[134,40,71,38],[135,6,72,4,"justifyContent"],[135,20,72,18],[135,22,72,20],[135,30,72,28],[136,6,73,4,"alignItems"],[136,16,73,14],[136,18,73,16],[137,4,74,2],[137,5,74,3],[138,4,75,2,"loadingText"],[138,15,75,13],[138,17,75,15],[139,6,76,4,"marginTop"],[139,15,76,13],[139,17,76,15],[139,19,76,17],[140,6,77,4,"fontSize"],[140,14,77,12],[140,16,77,14],[140,18,77,16],[141,6,78,4,"color"],[141,11,78,9],[141,13,78,11,"COLORS"],[141,19,78,17],[141,20,78,18,"text"],[142,4,79,2],[143,2,80,0],[143,3,80,1],[143,4,80,2],[144,2,80,3],[144,6,80,3,"_c"],[144,8,80,3],[145,2,80,3,"$RefreshReg$"],[145,14,80,3],[145,15,80,3,"_c"],[145,17,80,3],[146,0,80,3],[146,3]],"functionMap":{"names":["<global>","Index","useEffect$argument_0","checkAuth","Promise$argument_0"],"mappings":"AAA;eCY;YCK;GDG;YCE;sBCC;wBCK,mCD;KD0B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}