{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":40,"index":166}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":167},"end":{"line":4,"column":44,"index":211}}],"key":"1dnSYy85BrQ8GvZyUKLmyTkvrWI=","exportNames":["*"],"imports":1}},{"name":"../src/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":212},"end":{"line":5,"column":34,"index":246}}],"key":"hItasGPnvPxlPtlTbtNshqLBPMw=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/index.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return Index;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[2], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[4], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _srcStore = require(_dependencyMap[6], \"../src/store\");\n  var _srcApi = require(_dependencyMap[7], \"../src/api\");\n  var api = _interopNamespace(_srcApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  const COLORS = {\n    primary: '#7C3AED',\n    background: '#F8F9FA',\n    text: '#212529'\n  };\n  function Index() {\n    _s();\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      sessionToken,\n      isLoading,\n      setUser,\n      loadStoredAuth\n    } = (0, _srcStore.useAuthStore)();\n    const [checking, setChecking] = (0, _react.useState)(true);\n    const [status, setStatus] = (0, _react.useState)('Loading...');\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    (0, _react.useEffect)(() => {\n      const checkAuth = async () => {\n        // Wait for auth store to finish loading\n        if (isLoading) return;\n\n        // Small delay to ensure navigation is ready\n        await new Promise(resolve => setTimeout(resolve, 300));\n        if (!sessionToken) {\n          console.log('No session token, redirecting to login');\n          router.replace('/(auth)/login');\n          return;\n        }\n        try {\n          setStatus('Checking session...');\n          console.log('Checking auth with token...');\n          const response = await api.getMe();\n          setUser(response.data);\n\n          // Check if user has completed profile setup\n          const user = response.data;\n          const needsProfile = !user.name || !user.partner_type;\n          if (needsProfile) {\n            console.log('User needs to complete profile, redirecting to register');\n            router.replace('/register');\n          } else {\n            console.log('User is fully registered, redirecting to home');\n            router.replace('/(main)/home');\n          }\n        } catch (error) {\n          console.error('Auth check failed:', error);\n          router.replace('/(auth)/login');\n        } finally {\n          setChecking(false);\n        }\n      };\n      checkAuth();\n    }, [isLoading, sessionToken]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: COLORS.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.loadingText,\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this);\n  }\n  _s(Index, \"cRDxRpwcvFaaSsWfP8tsp6II++U=\", false, function () {\n    return [_expoRouter.useRouter, _srcStore.useAuthStore];\n  });\n  _c = Index;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: COLORS.background,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    loadingText: {\n      marginTop: 16,\n      fontSize: 16,\n      color: COLORS.text\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"Index\");\n});","lineCount":147,"map":[[29,2,13,15,"Object"],[29,8,13,15],[29,9,13,15,"defineProperty"],[29,23,13,15],[29,24,13,15,"exports"],[29,31,13,15],[30,4,13,15,"enumerable"],[30,14,13,15],[31,4,13,15,"get"],[31,7,13,15],[31,18,13,15,"get"],[31,19,13,15],[32,6,13,15],[32,13,13,15,"Index"],[32,18,13,15],[33,4,13,15],[34,2,13,15],[35,2,1,0],[35,6,1,0,"_react"],[35,12,1,0],[35,15,1,0,"require"],[35,22,1,0],[35,23,1,0,"_dependencyMap"],[35,37,1,0],[36,2,1,51],[36,6,1,51,"_reactNativeWebDistExportsView"],[36,36,1,51],[36,39,1,51,"require"],[36,46,1,51],[36,47,1,51,"_dependencyMap"],[36,61,1,51],[37,2,1,51],[37,6,1,51,"View"],[37,10,1,51],[37,13,1,51,"_interopDefault"],[37,28,1,51],[37,29,1,51,"_reactNativeWebDistExportsView"],[37,59,1,51],[38,2,1,51],[38,6,1,51,"_reactNativeWebDistExportsActivityIndicator"],[38,49,1,51],[38,52,1,51,"require"],[38,59,1,51],[38,60,1,51,"_dependencyMap"],[38,74,1,51],[39,2,1,51],[39,6,1,51,"ActivityIndicator"],[39,23,1,51],[39,26,1,51,"_interopDefault"],[39,41,1,51],[39,42,1,51,"_reactNativeWebDistExportsActivityIndicator"],[39,85,1,51],[40,2,1,51],[40,6,1,51,"_reactNativeWebDistExportsStyleSheet"],[40,42,1,51],[40,45,1,51,"require"],[40,52,1,51],[40,53,1,51,"_dependencyMap"],[40,67,1,51],[41,2,1,51],[41,6,1,51,"StyleSheet"],[41,16,1,51],[41,19,1,51,"_interopDefault"],[41,34,1,51],[41,35,1,51,"_reactNativeWebDistExportsStyleSheet"],[41,71,1,51],[42,2,1,51],[42,6,1,51,"_reactNativeWebDistExportsText"],[42,36,1,51],[42,39,1,51,"require"],[42,46,1,51],[42,47,1,51,"_dependencyMap"],[42,61,1,51],[43,2,1,51],[43,6,1,51,"Text"],[43,10,1,51],[43,13,1,51,"_interopDefault"],[43,28,1,51],[43,29,1,51,"_reactNativeWebDistExportsText"],[43,59,1,51],[44,2,3,0],[44,6,3,0,"_expoRouter"],[44,17,3,0],[44,20,3,0,"require"],[44,27,3,0],[44,28,3,0,"_dependencyMap"],[44,42,3,0],[45,2,4,0],[45,6,4,0,"_srcStore"],[45,15,4,0],[45,18,4,0,"require"],[45,25,4,0],[45,26,4,0,"_dependencyMap"],[45,40,4,0],[46,2,5,0],[46,6,5,0,"_srcApi"],[46,13,5,0],[46,16,5,0,"require"],[46,23,5,0],[46,24,5,0,"_dependencyMap"],[46,38,5,0],[47,2,5,0],[47,6,5,0,"api"],[47,9,5,0],[47,12,5,0,"_interopNamespace"],[47,29,5,0],[47,30,5,0,"_srcApi"],[47,37,5,0],[48,2,5,34],[48,6,5,34,"_reactJsxDevRuntime"],[48,25,5,34],[48,28,5,34,"require"],[48,35,5,34],[48,36,5,34,"_dependencyMap"],[48,50,5,34],[49,2,7,0],[49,8,7,6,"COLORS"],[49,14,7,12],[49,17,7,15],[50,4,8,2,"primary"],[50,11,8,9],[50,13,8,11],[50,22,8,20],[51,4,9,2,"background"],[51,14,9,12],[51,16,9,14],[51,25,9,23],[52,4,10,2,"text"],[52,8,10,6],[52,10,10,8],[53,2,11,0],[53,3,11,1],[54,2,13,15],[54,11,13,24,"Index"],[54,16,13,29,"Index"],[54,17,13,29],[54,19,13,32],[55,4,13,32,"_s"],[55,6,13,32],[56,4,14,2],[56,10,14,8,"router"],[56,16,14,14],[56,19,14,17],[56,23,14,17,"useRouter"],[56,34,14,26],[56,35,14,26,"useRouter"],[56,44,14,26],[56,46,14,27],[56,47,14,28],[57,4,15,2],[57,10,15,8],[58,6,15,10,"sessionToken"],[58,18,15,22],[59,6,15,24,"isLoading"],[59,15,15,33],[60,6,15,35,"setUser"],[60,13,15,42],[61,6,15,44,"loadStoredAuth"],[62,4,15,59],[62,5,15,60],[62,8,15,63],[62,12,15,63,"useAuthStore"],[62,21,15,75],[62,22,15,75,"useAuthStore"],[62,34,15,75],[62,36,15,76],[62,37,15,77],[63,4,16,2],[63,10,16,8],[63,11,16,9,"checking"],[63,19,16,17],[63,21,16,19,"setChecking"],[63,32,16,30],[63,33,16,31],[63,36,16,34],[63,40,16,34,"useState"],[63,46,16,42],[63,47,16,42,"useState"],[63,55,16,42],[63,57,16,43],[63,61,16,47],[63,62,16,48],[64,4,17,2],[64,10,17,8],[64,11,17,9,"status"],[64,17,17,15],[64,19,17,17,"setStatus"],[64,28,17,26],[64,29,17,27],[64,32,17,30],[64,36,17,30,"useState"],[64,42,17,38],[64,43,17,38,"useState"],[64,51,17,38],[64,53,17,39],[64,65,17,51],[64,66,17,52],[65,4,19,2],[65,8,19,2,"useEffect"],[65,14,19,11],[65,15,19,11,"useEffect"],[65,24,19,11],[65,26,19,12],[65,32,19,18],[66,6,20,4,"loadStoredAuth"],[66,20,20,18],[66,21,20,19],[66,22,20,20],[67,4,21,2],[67,5,21,3],[67,7,21,5],[67,9,21,7],[67,10,21,8],[68,4,23,2],[68,8,23,2,"useEffect"],[68,14,23,11],[68,15,23,11,"useEffect"],[68,24,23,11],[68,26,23,12],[68,32,23,18],[69,6,24,4],[69,12,24,10,"checkAuth"],[69,21,24,19],[69,24,24,22],[69,30,24,22,"checkAuth"],[69,31,24,22],[69,36,24,34],[70,8,25,6],[71,8,26,6],[71,12,26,10,"isLoading"],[71,21,26,19],[71,23,26,21],[73,8,28,6],[74,8,29,6],[74,14,29,12],[74,18,29,16,"Promise"],[74,25,29,23],[74,26,29,24,"resolve"],[74,33,29,31],[74,37,29,35,"setTimeout"],[74,47,29,45],[74,48,29,46,"resolve"],[74,55,29,53],[74,57,29,55],[74,60,29,58],[74,61,29,59],[74,62,29,60],[75,8,31,6],[75,12,31,10],[75,13,31,11,"sessionToken"],[75,25,31,23],[75,27,31,25],[76,10,32,8,"console"],[76,17,32,15],[76,18,32,16,"log"],[76,21,32,19],[76,22,32,20],[76,62,32,60],[76,63,32,61],[77,10,33,8,"router"],[77,16,33,14],[77,17,33,15,"replace"],[77,24,33,22],[77,25,33,23],[77,40,33,38],[77,41,33,39],[78,10,34,8],[79,8,35,6],[80,8,37,6],[80,12,37,10],[81,10,38,8,"setStatus"],[81,19,38,17],[81,20,38,18],[81,41,38,39],[81,42,38,40],[82,10,39,8,"console"],[82,17,39,15],[82,18,39,16,"log"],[82,21,39,19],[82,22,39,20],[82,51,39,49],[82,52,39,50],[83,10,40,8],[83,16,40,14,"response"],[83,24,40,22],[83,27,40,25],[83,33,40,31,"api"],[83,36,40,34],[83,37,40,35,"getMe"],[83,42,40,40],[83,43,40,41],[83,44,40,42],[84,10,41,8,"setUser"],[84,17,41,15],[84,18,41,16,"response"],[84,26,41,24],[84,27,41,25,"data"],[84,31,41,29],[84,32,41,30],[86,10,43,8],[87,10,44,8],[87,16,44,14,"user"],[87,20,44,18],[87,23,44,21,"response"],[87,31,44,29],[87,32,44,30,"data"],[87,36,44,34],[88,10,45,8],[88,16,45,14,"needsProfile"],[88,28,45,26],[88,31,45,29],[88,32,45,30,"user"],[88,36,45,34],[88,37,45,35,"name"],[88,41,45,39],[88,45,45,43],[88,46,45,44,"user"],[88,50,45,48],[88,51,45,49,"partner_type"],[88,63,45,61],[89,10,47,8],[89,14,47,12,"needsProfile"],[89,26,47,24],[89,28,47,26],[90,12,48,10,"console"],[90,19,48,17],[90,20,48,18,"log"],[90,23,48,21],[90,24,48,22],[90,81,48,79],[90,82,48,80],[91,12,49,10,"router"],[91,18,49,16],[91,19,49,17,"replace"],[91,26,49,24],[91,27,49,25],[91,38,49,36],[91,39,49,37],[92,10,50,8],[92,11,50,9],[92,17,50,15],[93,12,51,10,"console"],[93,19,51,17],[93,20,51,18,"log"],[93,23,51,21],[93,24,51,22],[93,71,51,69],[93,72,51,70],[94,12,52,10,"router"],[94,18,52,16],[94,19,52,17,"replace"],[94,26,52,24],[94,27,52,25],[94,41,52,39],[94,42,52,40],[95,10,53,8],[96,8,54,6],[96,9,54,7],[96,10,54,8],[96,17,54,15,"error"],[96,22,54,20],[96,24,54,22],[97,10,55,8,"console"],[97,17,55,15],[97,18,55,16,"error"],[97,23,55,21],[97,24,55,22],[97,44,55,42],[97,46,55,44,"error"],[97,51,55,49],[97,52,55,50],[98,10,56,8,"router"],[98,16,56,14],[98,17,56,15,"replace"],[98,24,56,22],[98,25,56,23],[98,40,56,38],[98,41,56,39],[99,8,57,6],[99,9,57,7],[99,18,57,16],[100,10,58,8,"setChecking"],[100,21,58,19],[100,22,58,20],[100,27,58,25],[100,28,58,26],[101,8,59,6],[102,6,60,4],[102,7,60,5],[103,6,62,4,"checkAuth"],[103,15,62,13],[103,16,62,14],[103,17,62,15],[104,4,63,2],[104,5,63,3],[104,7,63,5],[104,8,63,6,"isLoading"],[104,17,63,15],[104,19,63,17,"sessionToken"],[104,31,63,29],[104,32,63,30],[104,33,63,31],[105,4,65,2],[105,24,66,4],[105,28,66,4,"_reactJsxDevRuntime"],[105,47,66,4],[105,48,66,4,"jsxDEV"],[105,54,66,4],[105,56,66,5,"View"],[105,60,66,9],[105,61,66,9,"default"],[105,68,66,9],[106,6,66,10,"style"],[106,11,66,15],[106,13,66,17,"styles"],[106,19,66,23],[106,20,66,24,"container"],[106,29,66,34],[107,6,66,34,"children"],[107,14,66,34],[107,30,67,6],[107,34,67,6,"_reactJsxDevRuntime"],[107,53,67,6],[107,54,67,6,"jsxDEV"],[107,60,67,6],[107,62,67,7,"ActivityIndicator"],[107,79,67,24],[107,80,67,24,"default"],[107,87,67,24],[108,8,67,25,"size"],[108,12,67,29],[108,14,67,30],[108,21,67,37],[109,8,67,38,"color"],[109,13,67,43],[109,15,67,45,"COLORS"],[109,21,67,51],[109,22,67,52,"primary"],[110,6,67,60],[111,8,67,60,"fileName"],[111,16,67,60],[111,18,67,60,"_jsxFileName"],[111,30,67,60],[112,8,67,60,"lineNumber"],[112,18,67,60],[113,8,67,60,"columnNumber"],[113,20,67,60],[114,6,67,60],[114,13,67,62],[114,14,67,63],[114,29,68,6],[114,33,68,6,"_reactJsxDevRuntime"],[114,52,68,6],[114,53,68,6,"jsxDEV"],[114,59,68,6],[114,61,68,7,"Text"],[114,65,68,11],[114,66,68,11,"default"],[114,73,68,11],[115,8,68,12,"style"],[115,13,68,17],[115,15,68,19,"styles"],[115,21,68,25],[115,22,68,26,"loadingText"],[115,33,68,38],[116,8,68,38,"children"],[116,16,68,38],[116,18,68,40,"status"],[117,6,68,46],[118,8,68,46,"fileName"],[118,16,68,46],[118,18,68,46,"_jsxFileName"],[118,30,68,46],[119,8,68,46,"lineNumber"],[119,18,68,46],[120,8,68,46,"columnNumber"],[120,20,68,46],[121,6,68,46],[121,13,68,53],[121,14,68,54],[122,4,68,54],[123,6,68,54,"fileName"],[123,14,68,54],[123,16,68,54,"_jsxFileName"],[123,28,68,54],[124,6,68,54,"lineNumber"],[124,16,68,54],[125,6,68,54,"columnNumber"],[125,18,68,54],[126,4,68,54],[126,11,69,10],[126,12,69,11],[127,2,71,0],[128,2,71,1,"_s"],[128,4,71,1],[128,5,13,24,"Index"],[128,10,13,29],[129,4,13,29],[129,12,14,17,"useRouter"],[129,23,14,26],[129,24,14,26,"useRouter"],[129,33,14,26],[129,35,15,63,"useAuthStore"],[129,44,15,75],[129,45,15,75,"useAuthStore"],[129,57,15,75],[130,2,15,75],[131,2,15,75,"_c"],[131,4,15,75],[131,7,13,24,"Index"],[131,12,13,29],[132,2,73,0],[132,8,73,6,"styles"],[132,14,73,12],[132,17,73,15,"StyleSheet"],[132,27,73,25],[132,28,73,25,"default"],[132,35,73,25],[132,36,73,26,"create"],[132,42,73,32],[132,43,73,33],[133,4,74,2,"container"],[133,13,74,11],[133,15,74,13],[134,6,75,4,"flex"],[134,10,75,8],[134,12,75,10],[134,13,75,11],[135,6,76,4,"backgroundColor"],[135,21,76,19],[135,23,76,21,"COLORS"],[135,29,76,27],[135,30,76,28,"background"],[135,40,76,38],[136,6,77,4,"justifyContent"],[136,20,77,18],[136,22,77,20],[136,30,77,28],[137,6,78,4,"alignItems"],[137,16,78,14],[137,18,78,16],[138,4,79,2],[138,5,79,3],[139,4,80,2,"loadingText"],[139,15,80,13],[139,17,80,15],[140,6,81,4,"marginTop"],[140,15,81,13],[140,17,81,15],[140,19,81,17],[141,6,82,4,"fontSize"],[141,14,82,12],[141,16,82,14],[141,18,82,16],[142,6,83,4,"color"],[142,11,83,9],[142,13,83,11,"COLORS"],[142,19,83,17],[142,20,83,18,"text"],[143,4,84,2],[144,2,85,0],[144,3,85,1],[144,4,85,2],[145,2,85,3],[145,6,85,3,"_c"],[145,8,85,3],[146,2,85,3,"$RefreshReg$"],[146,14,85,3],[146,15,85,3,"_c"],[146,17,85,3],[147,0,85,3],[147,3]],"functionMap":{"names":["<global>","Index","useEffect$argument_0","checkAuth","Promise$argument_0"],"mappings":"AAA;eCY;YCM;GDE;YCE;sBCC;wBCK,mCD;KD+B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}