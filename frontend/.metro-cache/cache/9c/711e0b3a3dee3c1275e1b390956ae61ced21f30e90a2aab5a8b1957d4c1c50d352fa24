{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // Location types\n\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    sessionToken: null,\n    isLoading: true,\n    isUserLoaded: false,\n    // Start as false\n    stats: null,\n    activeWork: [],\n    isOnline: false,\n    // Location state\n    currentLocation: null,\n    locationPermissionGranted: false,\n    isTrackingLocation: false,\n    setUser: user => set({\n      user,\n      isUserLoaded: true\n    }),\n    // Mark as loaded when user is set\n    setSessionToken: async token => {\n      if (token) {\n        await AsyncStorage.default.setItem('session_token', token);\n      } else {\n        await AsyncStorage.default.removeItem('session_token');\n      }\n      set({\n        sessionToken: token\n      });\n    },\n    setIsLoading: loading => set({\n      isLoading: loading\n    }),\n    setIsUserLoaded: loaded => set({\n      isUserLoaded: loaded\n    }),\n    setStats: stats => set({\n      stats\n    }),\n    setIsOnline: async online => {\n      // Persist online state and activity time to AsyncStorage\n      try {\n        await AsyncStorage.default.setItem('is_online', JSON.stringify(online));\n        // Save last activity time when going online\n        if (online) {\n          await AsyncStorage.default.setItem('last_activity_time', Date.now().toString());\n        }\n      } catch (error) {\n        console.error('Error saving online state:', error);\n      }\n      set({\n        isOnline: online\n      });\n    },\n    setActiveWork: work => set({\n      activeWork: work\n    }),\n    addActiveWork: work => set(state => ({\n      activeWork: [...state.activeWork, work]\n    })),\n    removeActiveWork: id => set(state => ({\n      activeWork: state.activeWork.filter(w => w.id !== id)\n    })),\n    // Location actions\n    setCurrentLocation: location => set({\n      currentLocation: location\n    }),\n    setLocationPermissionGranted: granted => set({\n      locationPermissionGranted: granted\n    }),\n    setIsTrackingLocation: tracking => set({\n      isTrackingLocation: tracking\n    }),\n    // Update last activity time (call this periodically when app is active)\n    updateLastActivity: async () => {\n      try {\n        await AsyncStorage.default.setItem('last_activity_time', Date.now().toString());\n      } catch (error) {\n        console.error('Error updating last activity:', error);\n      }\n    },\n    logout: async () => {\n      await AsyncStorage.default.removeItem('session_token');\n      await AsyncStorage.default.removeItem('is_online');\n      await AsyncStorage.default.removeItem('last_activity_time');\n      set({\n        user: null,\n        sessionToken: null,\n        stats: null,\n        isOnline: false,\n        activeWork: [],\n        isUserLoaded: false,\n        currentLocation: null,\n        isTrackingLocation: false\n      });\n    },\n    loadStoredAuth: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('session_token');\n        const onlineState = await AsyncStorage.default.getItem('is_online');\n        if (token) {\n          set({\n            sessionToken: token\n          });\n        }\n\n        // Restore online state if saved\n        if (onlineState !== null) {\n          set({\n            isOnline: JSON.parse(onlineState)\n          });\n        }\n      } catch (error) {\n        console.error('Error loading stored auth:', error);\n      } finally {\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":142,"map":[[12,2,114,0,"Object"],[12,8,114,0],[12,9,114,0,"defineProperty"],[12,23,114,0],[12,24,114,0,"exports"],[12,31,114,0],[13,4,114,0,"enumerable"],[13,14,114,0],[14,4,114,0,"get"],[14,7,114,0],[14,18,114,0,"get"],[14,19,114,0],[15,6,114,0],[15,13,114,0,"useAuthStore"],[15,25,114,0],[16,4,114,0],[17,2,114,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,6,0],[23,2,114,7],[23,8,114,13,"useAuthStore"],[23,20,114,25],[23,23,114,28],[23,27,114,28,"create"],[23,35,114,34],[23,36,114,34,"create"],[23,42,114,34],[23,44,114,46],[23,45,114,47,"set"],[23,48,114,50],[23,50,114,52,"get"],[23,53,114,55],[23,59,114,61],[24,4,115,2,"user"],[24,8,115,6],[24,10,115,8],[24,14,115,12],[25,4,116,2,"sessionToken"],[25,16,116,14],[25,18,116,16],[25,22,116,20],[26,4,117,2,"isLoading"],[26,13,117,11],[26,15,117,13],[26,19,117,17],[27,4,118,2,"isUserLoaded"],[27,16,118,14],[27,18,118,16],[27,23,118,21],[28,4,118,24],[29,4,119,2,"stats"],[29,9,119,7],[29,11,119,9],[29,15,119,13],[30,4,120,2,"activeWork"],[30,14,120,12],[30,16,120,14],[30,18,120,16],[31,4,121,2,"isOnline"],[31,12,121,10],[31,14,121,12],[31,19,121,17],[32,4,123,2],[33,4,124,2,"currentLocation"],[33,19,124,17],[33,21,124,19],[33,25,124,23],[34,4,125,2,"locationPermissionGranted"],[34,29,125,27],[34,31,125,29],[34,36,125,34],[35,4,126,2,"isTrackingLocation"],[35,22,126,20],[35,24,126,22],[35,29,126,27],[36,4,128,2,"setUser"],[36,11,128,9],[36,13,128,12,"user"],[36,17,128,16],[36,21,128,21,"set"],[36,24,128,24],[36,25,128,25],[37,6,128,27,"user"],[37,10,128,31],[38,6,128,33,"isUserLoaded"],[38,18,128,45],[38,20,128,47],[39,4,128,52],[39,5,128,53],[39,6,128,54],[40,4,128,57],[41,4,129,2,"setSessionToken"],[41,19,129,17],[41,21,129,19],[41,27,129,26,"token"],[41,32,129,31],[41,36,129,36],[42,6,130,4],[42,10,130,8,"token"],[42,15,130,13],[42,17,130,15],[43,8,131,6],[43,14,131,12,"AsyncStorage"],[43,26,131,24],[43,27,131,24,"default"],[43,34,131,24],[43,35,131,25,"setItem"],[43,42,131,32],[43,43,131,33],[43,58,131,48],[43,60,131,50,"token"],[43,65,131,55],[43,66,131,56],[44,6,132,4],[44,7,132,5],[44,13,132,11],[45,8,133,6],[45,14,133,12,"AsyncStorage"],[45,26,133,24],[45,27,133,24,"default"],[45,34,133,24],[45,35,133,25,"removeItem"],[45,45,133,35],[45,46,133,36],[45,61,133,51],[45,62,133,52],[46,6,134,4],[47,6,135,4,"set"],[47,9,135,7],[47,10,135,8],[48,8,135,10,"sessionToken"],[48,20,135,22],[48,22,135,24,"token"],[49,6,135,30],[49,7,135,31],[49,8,135,32],[50,4,136,2],[50,5,136,3],[51,4,137,2,"setIsLoading"],[51,16,137,14],[51,18,137,17,"loading"],[51,25,137,24],[51,29,137,29,"set"],[51,32,137,32],[51,33,137,33],[52,6,137,35,"isLoading"],[52,15,137,44],[52,17,137,46,"loading"],[53,4,137,54],[53,5,137,55],[53,6,137,56],[54,4,138,2,"setIsUserLoaded"],[54,19,138,17],[54,21,138,20,"loaded"],[54,27,138,26],[54,31,138,31,"set"],[54,34,138,34],[54,35,138,35],[55,6,138,37,"isUserLoaded"],[55,18,138,49],[55,20,138,51,"loaded"],[56,4,138,58],[56,5,138,59],[56,6,138,60],[57,4,139,2,"setStats"],[57,12,139,10],[57,14,139,13,"stats"],[57,19,139,18],[57,23,139,23,"set"],[57,26,139,26],[57,27,139,27],[58,6,139,29,"stats"],[59,4,139,35],[59,5,139,36],[59,6,139,37],[60,4,140,2,"setIsOnline"],[60,15,140,13],[60,17,140,15],[60,23,140,22,"online"],[60,29,140,28],[60,33,140,33],[61,6,141,4],[62,6,142,4],[62,10,142,8],[63,8,143,6],[63,14,143,12,"AsyncStorage"],[63,26,143,24],[63,27,143,24,"default"],[63,34,143,24],[63,35,143,25,"setItem"],[63,42,143,32],[63,43,143,33],[63,54,143,44],[63,56,143,46,"JSON"],[63,60,143,50],[63,61,143,51,"stringify"],[63,70,143,60],[63,71,143,61,"online"],[63,77,143,67],[63,78,143,68],[63,79,143,69],[64,8,144,6],[65,8,145,6],[65,12,145,10,"online"],[65,18,145,16],[65,20,145,18],[66,10,146,8],[66,16,146,14,"AsyncStorage"],[66,28,146,26],[66,29,146,26,"default"],[66,36,146,26],[66,37,146,27,"setItem"],[66,44,146,34],[66,45,146,35],[66,65,146,55],[66,67,146,57,"Date"],[66,71,146,61],[66,72,146,62,"now"],[66,75,146,65],[66,76,146,66],[66,77,146,67],[66,78,146,68,"toString"],[66,86,146,76],[66,87,146,77],[66,88,146,78],[66,89,146,79],[67,8,147,6],[68,6,148,4],[68,7,148,5],[68,8,148,6],[68,15,148,13,"error"],[68,20,148,18],[68,22,148,20],[69,8,149,6,"console"],[69,15,149,13],[69,16,149,14,"error"],[69,21,149,19],[69,22,149,20],[69,50,149,48],[69,52,149,50,"error"],[69,57,149,55],[69,58,149,56],[70,6,150,4],[71,6,151,4,"set"],[71,9,151,7],[71,10,151,8],[72,8,151,10,"isOnline"],[72,16,151,18],[72,18,151,20,"online"],[73,6,151,27],[73,7,151,28],[73,8,151,29],[74,4,152,2],[74,5,152,3],[75,4,153,2,"setActiveWork"],[75,17,153,15],[75,19,153,18,"work"],[75,23,153,22],[75,27,153,27,"set"],[75,30,153,30],[75,31,153,31],[76,6,153,33,"activeWork"],[76,16,153,43],[76,18,153,45,"work"],[77,4,153,50],[77,5,153,51],[77,6,153,52],[78,4,154,2,"addActiveWork"],[78,17,154,15],[78,19,154,18,"work"],[78,23,154,22],[78,27,154,27,"set"],[78,30,154,30],[78,31,154,32,"state"],[78,36,154,37],[78,41,154,43],[79,6,154,45,"activeWork"],[79,16,154,55],[79,18,154,57],[79,19,154,58],[79,22,154,61,"state"],[79,27,154,66],[79,28,154,67,"activeWork"],[79,38,154,77],[79,40,154,79,"work"],[79,44,154,83],[80,4,154,85],[80,5,154,86],[80,6,154,87],[80,7,154,88],[81,4,155,2,"removeActiveWork"],[81,20,155,18],[81,22,155,21,"id"],[81,24,155,23],[81,28,155,28,"set"],[81,31,155,31],[81,32,155,33,"state"],[81,37,155,38],[81,42,155,44],[82,6,155,46,"activeWork"],[82,16,155,56],[82,18,155,58,"state"],[82,23,155,63],[82,24,155,64,"activeWork"],[82,34,155,74],[82,35,155,75,"filter"],[82,41,155,81],[82,42,155,82,"w"],[82,43,155,83],[82,47,155,87,"w"],[82,48,155,88],[82,49,155,89,"id"],[82,51,155,91],[82,56,155,96,"id"],[82,58,155,98],[83,4,155,100],[83,5,155,101],[83,6,155,102],[83,7,155,103],[84,4,157,2],[85,4,158,2,"setCurrentLocation"],[85,22,158,20],[85,24,158,23,"location"],[85,32,158,31],[85,36,158,36,"set"],[85,39,158,39],[85,40,158,40],[86,6,158,42,"currentLocation"],[86,21,158,57],[86,23,158,59,"location"],[87,4,158,68],[87,5,158,69],[87,6,158,70],[88,4,159,2,"setLocationPermissionGranted"],[88,32,159,30],[88,34,159,33,"granted"],[88,41,159,40],[88,45,159,45,"set"],[88,48,159,48],[88,49,159,49],[89,6,159,51,"locationPermissionGranted"],[89,31,159,76],[89,33,159,78,"granted"],[90,4,159,86],[90,5,159,87],[90,6,159,88],[91,4,160,2,"setIsTrackingLocation"],[91,25,160,23],[91,27,160,26,"tracking"],[91,35,160,34],[91,39,160,39,"set"],[91,42,160,42],[91,43,160,43],[92,6,160,45,"isTrackingLocation"],[92,24,160,63],[92,26,160,65,"tracking"],[93,4,160,74],[93,5,160,75],[93,6,160,76],[94,4,162,2],[95,4,163,2,"updateLastActivity"],[95,22,163,20],[95,24,163,22],[95,30,163,22,"updateLastActivity"],[95,31,163,22],[95,36,163,34],[96,6,164,4],[96,10,164,8],[97,8,165,6],[97,14,165,12,"AsyncStorage"],[97,26,165,24],[97,27,165,24,"default"],[97,34,165,24],[97,35,165,25,"setItem"],[97,42,165,32],[97,43,165,33],[97,63,165,53],[97,65,165,55,"Date"],[97,69,165,59],[97,70,165,60,"now"],[97,73,165,63],[97,74,165,64],[97,75,165,65],[97,76,165,66,"toString"],[97,84,165,74],[97,85,165,75],[97,86,165,76],[97,87,165,77],[98,6,166,4],[98,7,166,5],[98,8,166,6],[98,15,166,13,"error"],[98,20,166,18],[98,22,166,20],[99,8,167,6,"console"],[99,15,167,13],[99,16,167,14,"error"],[99,21,167,19],[99,22,167,20],[99,53,167,51],[99,55,167,53,"error"],[99,60,167,58],[99,61,167,59],[100,6,168,4],[101,4,169,2],[101,5,169,3],[102,4,171,2,"logout"],[102,10,171,8],[102,12,171,10],[102,18,171,10,"logout"],[102,19,171,10],[102,24,171,22],[103,6,172,4],[103,12,172,10,"AsyncStorage"],[103,24,172,22],[103,25,172,22,"default"],[103,32,172,22],[103,33,172,23,"removeItem"],[103,43,172,33],[103,44,172,34],[103,59,172,49],[103,60,172,50],[104,6,173,4],[104,12,173,10,"AsyncStorage"],[104,24,173,22],[104,25,173,22,"default"],[104,32,173,22],[104,33,173,23,"removeItem"],[104,43,173,33],[104,44,173,34],[104,55,173,45],[104,56,173,46],[105,6,174,4],[105,12,174,10,"AsyncStorage"],[105,24,174,22],[105,25,174,22,"default"],[105,32,174,22],[105,33,174,23,"removeItem"],[105,43,174,33],[105,44,174,34],[105,64,174,54],[105,65,174,55],[106,6,175,4,"set"],[106,9,175,7],[106,10,175,8],[107,8,176,6,"user"],[107,12,176,10],[107,14,176,12],[107,18,176,16],[108,8,177,6,"sessionToken"],[108,20,177,18],[108,22,177,20],[108,26,177,24],[109,8,178,6,"stats"],[109,13,178,11],[109,15,178,13],[109,19,178,17],[110,8,179,6,"isOnline"],[110,16,179,14],[110,18,179,16],[110,23,179,21],[111,8,180,6,"activeWork"],[111,18,180,16],[111,20,180,18],[111,22,180,20],[112,8,181,6,"isUserLoaded"],[112,20,181,18],[112,22,181,20],[112,27,181,25],[113,8,182,6,"currentLocation"],[113,23,182,21],[113,25,182,23],[113,29,182,27],[114,8,183,6,"isTrackingLocation"],[114,26,183,24],[114,28,183,26],[115,6,184,4],[115,7,184,5],[115,8,184,6],[116,4,185,2],[116,5,185,3],[117,4,187,2,"loadStoredAuth"],[117,18,187,16],[117,20,187,18],[117,26,187,18,"loadStoredAuth"],[117,27,187,18],[117,32,187,30],[118,6,188,4],[118,10,188,8],[119,8,189,6],[119,14,189,12,"token"],[119,19,189,17],[119,22,189,20],[119,28,189,26,"AsyncStorage"],[119,40,189,38],[119,41,189,38,"default"],[119,48,189,38],[119,49,189,39,"getItem"],[119,56,189,46],[119,57,189,47],[119,72,189,62],[119,73,189,63],[120,8,190,6],[120,14,190,12,"onlineState"],[120,25,190,23],[120,28,190,26],[120,34,190,32,"AsyncStorage"],[120,46,190,44],[120,47,190,44,"default"],[120,54,190,44],[120,55,190,45,"getItem"],[120,62,190,52],[120,63,190,53],[120,74,190,64],[120,75,190,65],[121,8,192,6],[121,12,192,10,"token"],[121,17,192,15],[121,19,192,17],[122,10,193,8,"set"],[122,13,193,11],[122,14,193,12],[123,12,193,14,"sessionToken"],[123,24,193,26],[123,26,193,28,"token"],[124,10,193,34],[124,11,193,35],[124,12,193,36],[125,8,194,6],[127,8,196,6],[128,8,197,6],[128,12,197,10,"onlineState"],[128,23,197,21],[128,28,197,26],[128,32,197,30],[128,34,197,32],[129,10,198,8,"set"],[129,13,198,11],[129,14,198,12],[130,12,198,14,"isOnline"],[130,20,198,22],[130,22,198,24,"JSON"],[130,26,198,28],[130,27,198,29,"parse"],[130,32,198,34],[130,33,198,35,"onlineState"],[130,44,198,46],[131,10,198,48],[131,11,198,49],[131,12,198,50],[132,8,199,6],[133,6,200,4],[133,7,200,5],[133,8,200,6],[133,15,200,13,"error"],[133,20,200,18],[133,22,200,20],[134,8,201,6,"console"],[134,15,201,13],[134,16,201,14,"error"],[134,21,201,19],[134,22,201,20],[134,50,201,48],[134,52,201,50,"error"],[134,57,201,55],[134,58,201,56],[135,6,202,4],[135,7,202,5],[135,16,202,14],[136,8,203,6,"set"],[136,11,203,9],[136,12,203,10],[137,10,203,12,"isLoading"],[137,19,203,21],[137,21,203,23],[138,8,203,29],[138,9,203,30],[138,10,203,31],[139,6,204,4],[140,4,205,2],[141,2,206,0],[141,3,206,1],[141,4,206,2],[141,5,206,3],[142,0,206,4],[142,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","setSessionToken","setIsLoading","setIsUserLoaded","setStats","setIsOnline","setActiveWork","addActiveWork","set$argument_0","removeActiveWork","state.activeWork.filter$argument_0","setCurrentLocation","setLocationPermissionGranted","setIsTrackingLocation","updateLastActivity","logout","loadStoredAuth"],"mappings":"AAA;8CCiH;WCc,2CD;mBEC;GFO;gBGC,wCH;mBIC,yCJ;YKC,yBL;eMC;GNY;iBOC,mCP;iBQC,cC,wDD,CR;oBUC,YD,kDE,gBF,IC,CV;sBYG,gDZ;gCaC,wDb;yBcC,mDd;sBeG;GfM;UgBE;GhBc;kBiBE;GjBkB;EDC"},"hasCjsExports":false},"type":"js/module"}]}